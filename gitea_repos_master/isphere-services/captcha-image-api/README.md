# captcha-api

Сервис решения число буквенных капч на основе собственных НС и внешнего API

Дополнительные параметры, которые можно указать при отправке капчи внешним провайдерам:

RUCAPTCHA[https://rucaptcha.com/api-docs/normal-captcha]
 - phrase (false/true) - не указан/ответ должен содержать как минимум два слова, разделенных пробелом;
 - case (false/true) - не указан/учет регистра;
 - numeric (0/1/2/3/4) - не указан/ответ должен содержать только цифры/только буквы/только цифры ИЛИ только буквы/цифры И буквы;
 - math (false/true) - не указан/капча требует вычисления;
 - minLength (0/>=1) - не указан/определяет минимальную длину ответа;
 - maxLength (0/>=1) - не указан/определяет максимальную длину ответа;
 - comment (None/String) - не указан/комментарий к капче;
 - imgInstructions (None/base64) - дополнительное изображение с инструкцией, которое будет показано работникам. Изображение должно быть закодировано в формат Base64.

ANITCAPTCHA[https://anti-captcha.com/apidoc/task-types/ImageToTextTask]
 - phrase (false/true) - не указан/ответ должен содержать как минимум два слова, разделенных пробелом;
 - case (false/true) - не указан/учет регистра;
 - numeric (0/1/2) - не указан/ответ должен содержать только цифры/ответ должен содержать только буквы;
 - math (false/true) - не указан/капча требует вычисления;
 - minLength (0/>=1) - не указан/определяет минимальную длину ответа;
 - maxLength (0/>=1) - не указан/определяет максимальную длину ответа;
 - comment (None/String) - не указан/комментарий к капче;
 - websiteURL (None/String) - url-адрес источника капчи для учета статистики.

CAPMONSTER[https://docs.capmonster.cloud/docs/captchas/image-to-text]
 - case (false/true) - не указан/учет регистра;
 - numeric (0/1) - не указан/ответ должен содержать только цифры;
 - math (false/true) - не указан/капча требует вычисления;
 - CapMonsterModule (None/String) - имя распознающего модуля, например «Яндекс» (https://docs.capmonster.cloud/docs/api/module-name/)
 - recognizingThreshold (0-100) - порог распознавания капчи с возможным значением от 0 до 100. Например, если recognitingThreshold был установлен на 90 и задача решена с достоверностью 80, плата взыматься не будет. В этом случае пользователь получит ответ ERROR_CAPTCHA_UNSOLVABLE.



Токен-задачи

Для конфигурации параметров токен-задач используется файл config.json, расположенный в src/logic/token_config/
Файл содержит конфигурацию типов токен-задач, используемых провайдерами решений.

 - каждый тип задачи указывается отдельно, являясь её идентификатором (recaptchaV2, turnstile, и тд.);
 - типу задачи соответствует поле 'type' - строковое представление задачи, которое используется при запросах к провайдерам;
 - для каждого из типов задается конфигурация провайдера с соответствующим ему именем (recaptcha, capmonster, и тд.)
 - поскольку провайдеры требуют различные параметры, которые необходимо передать при запросе для решения того или иного типа задачи, в конфиге указываются следующие параметры:
 - - поле 'report' - 'slug'-часть URL-пути, если она существует, куда необходимо отрпавлять отчеты о результативности решения капчи. (указать 'null', если задачи отчеты не поддерживает);
 - - поле 'query_args' - вспомогательно поле, в котором указываются необходимые для задачи ('required') и опциональные ('optional') параметры, отправляемые в качестве контекста для решения
    токен-капчи. Применяются для валидации при формировании задачи. Задаются в формате 'snake_case'.
 !!!ВАЖНО!!!: Для провайдеров при решении токен-задач обязательным является поле 'websiteURL' - адрес целевой страницы, на которой решается капча. В эндпоинте '/api/tokens' есть отдельный параметр запроса 'url', который является обязательным при инициализации объекта модели 'website', поэтому указывать параметр 'websiteURL' в файле конфигурации не следует, так как его валидация происходит при обращении к эндпоинту.
