prometheus:
  service:
    type: LoadBalancer
  persistence:
    enabled: true
  enableAdminAPI: true
  additionalScrapeConfigs:
    enabled: true
    type: internal
    internal:
      jobList:
        - job_name: "node-exporter"
          static_configs:
            ###> @autogenerated:servers
            - labels:
                instance: gaydary-worker-01
                region: GAYDARY
                child_of: GAYDARY-PVE1
                server_type: VM
              targets:
              - 172.16.161.1:9100
            - labels:
                instance: gaydary-worker-02
                region: GAYDARY
                child_of: GAYDARY-PVE1
                server_type: VM
              targets:
              - 172.16.161.2:9100
            - labels:
                instance: gaydary-worker-03
                region: GAYDARY
                child_of: GAYDARY-PVE1
                server_type: VM
              targets:
              - 172.16.161.3:9100
            - labels:
                instance: kube-test3gayd
                region: GAYDARY
                child_of: GAYDARY-PVE1
                server_type: VM
              targets:
              - 172.16.161.4:9100
            - labels:
                instance: haos10.4
                region: GAYDARY
                child_of: GAYDARY-PVE1
                server_type: VM
              targets:
              - 192.168.161.10:9100
            - labels:
                instance: zbx-proxy-gaydary
                region: GAYDARY
                child_of: GAYDARY-PVE1
                server_type: LXC
              targets:
              - 172.16.161.5:9100
            - labels:
                instance: mongodb-0
                region: GAYDARY
                child_of: GAYDARY-PVE2
                server_type: VM
              targets:
              - 172.16.197.1:9100
            - labels:
                instance: test-minio-03
                region: GAYDARY
                child_of: GAYDARY-PVE2
                server_type: VM
              targets:
              - 172.16.161.107:9100
            - labels:
                instance: prod-gaydary-master
                region: GAYDARY
                child_of: GAYDARY-PVE2
                server_type: VM
              targets:
              - 172.16.161.102:9100
            - labels:
                instance: prod-gaydary-worker-01
                region: GAYDARY
                child_of: GAYDARY-PVE2
                server_type: VM
              targets:
              - 172.16.161.103:9100
            - labels:
                instance: prod-gaydary-loadbalancer
                region: GAYDARY
                child_of: GAYDARY-PVE2
                server_type: VM
              targets:
              - 172.16.161.104:9100
            - labels:
                instance: prod-gaydary-worker-02
                region: GAYDARY
                child_of: GAYDARY-PVE2
                server_type: VM
              targets:
              - 172.16.161.105:9100
            - labels:
                instance: prod-gaydary-worker-03
                region: GAYDARY
                child_of: GAYDARY-PVE2
                server_type: VM
              targets:
              - 172.16.161.106:9100
            - labels:
                instance: rnd-master
                region: RND
                child_of: RND-PVE1
                server_type: VM
              targets:
              - 172.16.1.2:9100
            - labels:
                instance: rnd-worker-01
                region: RND
                child_of: RND-PVE1
                server_type: VM
              targets:
              - 172.16.61.4:9100
            - labels:
                instance: rnd-worker-02
                region: RND
                child_of: RND-PVE1
                server_type: VM
              targets:
              - 172.16.61.2:9100
            - labels:
                instance: rnd-worker-03
                region: RND
                child_of: RND-PVE1
                server_type: VM
              targets:
              - 172.16.61.3:9100
            - labels:
                instance: kube-test2rnd
                region: RND
                child_of: RND-PVE1
                server_type: VM
              targets:
              - 172.16.61.5:9100
            - labels:
                instance: test-minio-01
                region: RND
                child_of: RND-PVE1
                server_type: VM
              targets:
              - 172.16.61.6:9100
            - labels:
                instance: zbx-proxy-rnd
                region: RND
                child_of: RND-PVE1
                server_type: LXC
              targets:
              - 172.16.161.5:9100
            - labels:
                instance: analytics
                region: RND
                child_of: RND-PVE1
                server_type: VM
              targets:
              - 172.16.99.12:9100
            - labels:
                instance: test-glpi
                region: VIDNOE
                child_of: MSK-PVE1
                server_type: LXC
              targets:
              - 172.16.77.3:9100
            - labels:
                instance: test-mysql-1
                region: VIDNOE
                child_of: MSK-PVE1
                server_type: LXC
              targets:
              - 172.16.77.10:9100
            - labels:
                instance: test-postgres-1
                region: VIDNOE
                child_of: MSK-PVE1
                server_type: LXC
              targets:
              - 172.16.77.11:9100
            - labels:
                instance: msk-worker-01
                region: VIDNOE
                child_of: MSK-PVE1
                server_type: VM
              targets:
              - 172.16.77.1:9100
            - labels:
                instance: msk-worker-02
                region: VIDNOE
                child_of: MSK-PVE1
                server_type: VM
              targets:
              - 172.16.77.2:9100
            - labels:
                instance: msk-master-10
                region: VIDNOE
                child_of: MSK-PVE2
                server_type: VM
              targets:
              - 172.16.1.4:9100
            - labels:
                instance: msk-worker-11
                region: VIDNOE
                child_of: MSK-PVE2
                server_type: VM
              targets:
              - 172.16.177.1:9100
            - labels:
                instance: msk-worker-12
                region: VIDNOE
                child_of: MSK-PVE2
                server_type: VM
              targets:
              - 172.16.177.2:9100
            - labels:
                instance: prod-vidnoe-master
                region: VIDNOE
                child_of: MSK-PVE2
                server_type: VM
              targets:
              - 172.16.177.4:9100
            - labels:
                instance: prod-vidnoe-worker-01
                region: VIDNOE
                child_of: MSK-PVE2
                server_type: VM
              targets:
              - 172.16.177.5:9100
            - labels:
                instance: prod-vidnoe-worker-02
                region: VIDNOE
                child_of: MSK-PVE2
                server_type: VM
              targets:
              - 172.16.177.7:9100
            - labels:
                instance: prod-vidnoe-worker-03
                region: VIDNOE
                child_of: MSK-PVE2
                server_type: VM
              targets:
              - 172.16.177.8:9100
            - labels:
                instance: prod-vidnoe-loadbalancer-01
                region: VIDNOE
                child_of: MSK-PVE2
                server_type: VM
              targets:
              - 172.16.177.6:9100
            - labels:
                instance: phpipam
                region: VIDNOE
                child_of: MSK-PVE3
                server_type: LXC
              targets:
              - 172.16.97.20:9100
            - labels:
                instance: dev-mysql-1
                region: VIDNOE
                child_of: MSK-PVE3
                server_type: LXC
              targets:
              - 172.16.97.7:9100
            - labels:
                instance: dev-mysql-1
                region: VIDNOE
                child_of: MSK-PVE3
                server_type: LXC
              targets:
              - 172.16.97.3:9100
            - labels:
                instance: dev-semigolov
                region: VIDNOE
                child_of: MSK-PVE3
                server_type: LXC
              targets:
              - 172.16.97.1:9100
            - labels:
                instance: dev-maxim
                region: VIDNOE
                child_of: MSK-PVE3
                server_type: LXC
              targets:
              - 172.16.97.2:9100
            - labels:
                instance: prod-capmonster
                region: VIDNOE
                child_of: MSK-PVE3
                server_type: VM
              targets:
              - 172.16.97.6:9100
            - labels:
                instance: msk-worker-92
                region: VIDNOE
                child_of: MSK-PVE3
                server_type: VM
              targets:
              - 172.16.97.13:9100
            - labels:
                instance: dev-docker
                region: VIDNOE
                child_of: MSK-PVE3
                server_type: VM
              targets:
              - 172.16.97.10:9100
            - labels:
                instance: zabbix
                region: VIDNOE
                child_of: MSK-PVE3
                server_type: VM
              targets:
              - 172.16.97.8:9100
            - labels:
                instance: dev-qansylli
                region: VIDNOE
                child_of: MSK-PVE4
                server_type: VM
              targets:
              - 172.16.199.2:9100
            - labels:
                instance: dev-postgres
                region: VIDNOE
                child_of: MSK-PVE4
                server_type: VM
              targets:
              - 172.16.199.3:9100
            - labels:
                instance: prod-nodejs-vidnoe
                region: VIDNOE
                child_of: MSK-PVE4
                server_type: VM
              targets:
              - 172.16.199.4:9100
            - labels:
                instance: prod-minio-02
                region: VIDNOE
                child_of: MSK-PVE4
                server_type: VM
              targets:
              - 172.16.199.7:9100
            - labels:
                instance: mongodb-1
                region: VIDNOE
                child_of: MSK-PVE4
                server_type: VM
              targets:
              - 172.16.199.8:9100
            - labels:
                instance: prod-mysql-s2
                region: VIDNOE
                child_of: MSK-PVE4
                server_type: VM
              targets:
              - 172.16.199.9:9100
            - labels:
                instance: test-haproxy-postgres
                region: VIDNOE
                child_of: MSK-PVE4
                server_type: VM
              targets:
              - 172.16.199.10:9100
            - labels:
                instance: test-mysql-2
                region: STUPINO
                child_of: STUPINO-PVE1
                server_type: VM
              targets:
              - 172.16.50.3:9100
            - labels:
                instance: zbx-proxy-stupino1
                region: STUPINO
                child_of: STUPINO-PVE1
                server_type: LXC
              targets:
              - 172.16.50.8:9100
            - labels:
                instance: stupino-worker-01
                region: STUPINO
                child_of: STUPINO-PVE1
                server_type: VM
              targets:
              - 172.16.50.4:9100
            - labels:
                instance: stupino-worker-02
                region: STUPINO
                child_of: STUPINO-PVE1
                server_type: VM
              targets:
              - 172.16.50.5:9100
            - labels:
                instance: stupino-worker-03
                region: STUPINO
                child_of: STUPINO-PVE1
                server_type: VM
              targets:
              - 172.16.50.6:9100
            - labels:
                instance: prod-stupino-master
                region: STUPINO
                child_of: STUPINO-PVE2
                server_type: VM
              targets:
              - 172.16.150.1:9100
            - labels:
                instance: prod-stupino-worker-01
                region: STUPINO
                child_of: STUPINO-PVE2
                server_type: VM
              targets:
              - 172.16.150.2:9100
            - labels:
                instance: prod-stupino-loadbalancer-01
                region: STUPINO
                child_of: STUPINO-PVE2
                server_type: VM
              targets:
              - 172.16.150.3:9100
            - labels:
                instance: prod-stupino-worker-02
                region: STUPINO
                child_of: STUPINO-PVE2
                server_type: VM
              targets:
              - 172.16.150.4:9100
            - labels:
                instance: prod-stupino-worker-03
                region: STUPINO
                child_of: STUPINO-PVE2
                server_type: VM
              targets:
              - 172.16.150.5:9100
            - labels:
                instance: test-postgres-2
                region: STUPINO
                child_of: STUPINO-PVE3
                server_type: VM
              targets:
              - 172.16.50.103:9100
            - labels:
                instance: prod-nodejs-stupino
                region: STUPINO
                child_of: STUPINO-PVE3
                server_type: VM
              targets:
              - 172.16.50.105:9100
            - labels:
                instance: prod-minio-04
                region: STUPINO
                child_of: STUPINO-PVE3
                server_type: VM
              targets:
              - 172.16.50.107:9100
            - labels:
                instance: prod-mongodb-2
                region: STUPINO
                child_of: STUPINO-PVE3
                server_type: VM
              targets:
              - 172.16.50.108:9100
            - labels:
                instance: prod-mysql-s3
                region: STUPINO
                child_of: STUPINO-PVE3
                server_type: VM
              targets:
              - 172.16.50.109:9100
            - labels:
                instance: k8s-master
                region: MSK
                child_of: 1CLOUD
              targets:
              - 172.16.1.1:9100
            - labels:
                instance: i-sphere-main
                region: MSK
                child_of: 1CLOUD
              targets:
              - 172.16.99.3:9100
            - labels:
                instance: databases
                region: MSK
                child_of: 1CLOUD
              targets:
              - 172.16.99.1:9100
            - labels:
                instance: i-sphere-mysql
                region: MSK
                child_of: 1CLOUD
              targets:
              - 172.16.99.4:9100
            - labels:
                instance: proxy-kz
                region: АЛА
                child_of: 1CLOUD
              targets:
              - 172.16.100.1:9100
            - labels:
                instance: kz-worker-01
                region: АЛА2
                child_of: 1CLOUD
              targets:
              - 172.16.100.100:9100
            - labels:
                instance: proxy6
                region: SOK
                child_of: PVE
              targets:
              - 172.16.31.1:9100
            - labels:
                instance: timeweb_master
                child_of: TIMEWEB
              targets:
              - 172.16.2.1:9100
            
            ###< @autogenerated:servers

        - job_name: minio-cluster-exporter
          bearer_token: "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJwcm9tZXRoZXVzIiwic3ViIjoiTFRsVFZYVmNUcFBoQW9ZdHdYdmoiLCJleHAiOjQ4NzUzMzgxNDl9.mcZws1w_lK9C-7kM_nOa8SDW7U5sXzS0VoebNo0yAANCY1hZtF-46pPhTs9O4Nn9p-rOM5noomGT50cLJHPHGQ"
          metrics_path: /minio/v2/metrics/cluster
          scheme: http
          static_configs:
            - targets: 
                - 172.16.2.224:9000

        - job_name: minio-node-exporter
          bearer_token: "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJwcm9tZXRoZXVzIiwic3ViIjoiTFRsVFZYVmNUcFBoQW9ZdHdYdmoiLCJleHAiOjQ4NzUzMzg0MDJ9.hdv_E6JEQQ4RF8sC688fgEFV-qAd9JZ23db9YOJuGehJLz9oNXIO_kiJF6Uk2obqxefVynwQC79kkzq9MeDeDA"
          metrics_path: /minio/v2/metrics/node
          scheme: http
          static_configs:
            - targets: 
                - 172.16.61.6:9000    # test-minio-01
                - 172.16.199.7:9000   # prod-minio-02
                - 172.16.50.107:9000  # test-minio-03
                - 172.16.161.107:9000 # prod-minio-04
                  
        - job_name: keydb-exporter
          static_configs:
            - targets:
                - 172.16.0.85:9121

        - job_name: mysql-exporter
          static_configs:
            - targets: 
                - 172.16.99.4:9104
                  
        - job_name: postgres-exporter # https://github.com/prometheus-community/postgres_exporter
          static_configs:
            - targets:
                - 172.16.99.1:9187
                - 172.16.97.10:9187
                  
        - job_name: mongodb-exporter
          static_configs:
            - targets:
                - 172.16.197.1:9216
            - targets:
                - 172.16.199.8:9216
            - targets:
                - 172.16.50.108:9216

#        - job_name: "nginx-exporter"
#          static_configs:
#            - labels: { instance: "i-sphere.ru" }
#              targets: [ "172.16.99.3:9113" ]

#        - job_name: clickhouse
#          static_configs:
#            - labels:
#                instance: msk-worker-91
#              targets:
#                - clickhouse.clickhouse.svc.cluster.local:9363
#
#        # - job_name: mongodb
#        #   static_configs:
#        #     - labels:
#        #         instance: 1cloud-databases
#        #       targets:
#        #         - mongodb-exporter.metrics.svc.cluster.local:9216
#
#        - job_name: mysql
#          static_configs:
#            - labels:
#                instance: i-sphere.ru
#              targets:
#                - 172.16.99.3:9104
#
#
#        - job_name: rabbitmq
#          static_configs:
#            - targets:
#                - i-sphere.rabbitmq.svc.cluster.local:15692
#
#        - job_name: metrics
#          static_configs:
#            - targets:
#                - metrics-master-metrics.isphere-go-modules.svc.cluster.local
#
#        ########################
#        # node-exporter/servers
#        ########################
#
#        - job_name: node-exporter/servers/proxy-pass
#          scheme: https
#          basic_auth:
#            username: grafana
#            password: 8dKHHqPbagFfChee
#          static_configs:
#            - labels:
#                instance: proxy-pass
#              targets:
#                - i-sphere.ru:443
#          relabel_configs:
#            - source_labels: [ job_name ]
#              target_label: job_name
#              replacement: node-exporter/servers
#            - source_labels: [ job ]
#              target_label: job
#              replacement: node-exporter/servers
#
#        - job_name: node-exporter/servers
#          static_configs:
#            - labels:
#                instance: i-sphere
#              targets:
#                - 172.16.99.0:9100
#            - labels:
#                instance: 1cloud-databases
#              targets:
#                - 172.16.99.1:9100
#            - labels:
#                instance: 152fz-storage
#              targets:
#                - 172.16.99.2:9100
#            - labels:
#                instance: i-sphere.ru
#              targets:
#                - 172.16.99.3:9100
#
#        - job_name: k8s-node-exporter/nodes
#          static_configs:
#            - labels:
#                instance: prod-gaydary-master
#              targets:
#                - 172.16.161.102:9100
#            - labels:
#                instance: prod-gaydary-worker-01
#              targets:
#                - 172.16.161.103:9100
#            - labels:
#                instance: prod-vidnoe-master
#              targets:
#                - 172.16.177.4:9100
#            - labels:
#                instance: prod-vidnoe-worker-01
#              targets:
#                - 172.16.177.5:9100
#            - labels:
#                instance: prod-stupino-master
#              targets:
#                - 172.16.150.1:9100
#            - labels:
#                instance: prod-stupino-worker-01
#              targets:
#                - 172.16.150.2:9100
#            - labels:
#                instance: prod-timeweb-master
#              targets:
#                - 172.16.2.1:9100
#
#        - job_name: healthcheck
#          static_configs:
#            - targets:
#                - healthcheck-master.healthcheck.svc.cluster.local:8000
#
#        - job_name: jaeger
#          static_configs:
#            - labels:
#                instance: jaeger
#              targets:
#                - 172.16.97.10:14269
#
#        - job_name: coordinator
#          static_configs:
#            - labels:
#                instance: coordinator
#              targets:
#                - coordinator-master-http-serve.isphere-go-modules.svc.cluster.local
#

alertmanager:
  persistence:
    enabled: true
      

